modules:
  jira:globalPage:
    - key: incident-war-room-page
      resource: main-resource
      resolver:
        function: resolver
      title: Incident War Room
  jira:projectPage:
    - key: incident-war-room-project-page
      resource: main-resource
      resolver:
        function: resolver
      title: Incident War Room
  confluence:globalPage:
    - key: incident-war-room-confluence
      route: war-room
      resource: main-resource
      title: Incident War Room
  rovo:agent:
    - key: incident-commander
      name: Incident Commander
      description: AI assistant for incident management and war room operations
      prompt: prompts/agent-prompt.md
      conversationStarters:
        - "üö® Create a critical database incident"
        - "üìã Show me all active incidents"
        - "üîç Search for Redis connection timeout solutions"
        - "üìä What's the status of KAN-50?"
        - "üÜò Help! Production is down"
      actions:
        - create-incident-action
        - list-incidents-action
        - get-incident-status-action
        - search-solutions-action
  action:
    - key: create-incident-action
      function: create-inc-handler
      name: Create Incident
      description: Creates a new incident ticket in Jira
      inputs:
        summary:
          title: Summary
          type: string
          required: true
          description: "Brief description of the incident (e.g., 'Database connection pool exhausted')"
        description:
          title: Description
          type: string
          required: false
          description: "Detailed incident description with context and impact"
        projectKey:
          title: Project Key
          type: string
          required: false
          description: "Jira project key (e.g., 'KAN'). Defaults to KAN if not provided."
        assigneeId:
          title: Assignee ID
          type: string
          required: false
          description: "Jira account ID of the assignee. Leave empty for unassigned."
      actionType: create
    - key: list-incidents-action
      function: list-inc-handler
      name: List Active Incidents
      description: Retrieves all active incidents
      actionType: query
      inputs:
        projectKey:
          title: Project Key
          type: string
          required: false
          description: "Filter incidents by Jira project (e.g., 'KAN'). Leave empty for all projects."
    - key: get-incident-status-action
      function: get-inc-handler
      name: Get Incident Status
      description: Gets detailed status of a specific incident
      actionType: query
      inputs:
        issueKey:
          title: Issue Key
          type: string
          required: true
          description: "Jira issue key (e.g., 'KAN-45')"
    - key: search-solutions-action
      function: search-sol-handler
      name: Search Solutions
      description: Searches web for technical solutions and troubleshooting guides
      actionType: query
      inputs:
        query:
          title: Search Query
          type: string
          required: true
          description: "Technical search query (e.g., 'Redis connection timeout', 'PostgreSQL max_connections error')"
  function:
    - key: resolver
      handler: index.handler
    - key: create-inc-handler
      handler: index.handler
    - key: list-inc-handler
      handler: index.handler
    - key: get-inc-handler
      handler: index.handler
    - key: search-sol-handler
      handler: index.handler
    - key: async-search-handler
      handler: resolvers/async-search.handler
  trigger:
    - key: async-search-trigger
      function: async-search-handler
      events:
        - ari:cloud:ecosystem::extension/async-search
resources:
  - key: main-resource
    path: static/dashboard/build
app:
  runtime:
    name: nodejs22.x
  id: ari:cloud:ecosystem::app/389b8a6c-daa9-4780-b8f0-30eaf59d8e7b
permissions:
  scopes:
    - read:jira-work
    - write:jira-work
    - read:project:jira
    - read:jira-user
    - read:chat:rovo
    - read:confluence-content.all
    - read:confluence-space.summary
    - storage:app
  content:
    styles:
      - unsafe-inline
