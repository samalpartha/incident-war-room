modules:
  jira:globalPage:
    - key: orchestrator-dashboard-page
      resource: main-resource
      resolver:
        function: resolver
      title: Team Orchestrator
  jira:projectPage:
    - key: orchestrator-project-page
      resource: main-resource
      resolver:
        function: resolver
      title: Team Orchestrator
  confluence:globalPage:
    - key: orchestrator-confluence-page
      route: orchestrator
      resource: main-resource
      title: Team Orchestrator
  rovo:agent:
    - key: autonomous-orchestrator
      name: Autonomous Team Orchestrator
      description: Intelligent agent that proactively manages tickets, assignments, and sprints.
      prompt: prompts/orchestrator-prompt.md
      conversationStarters:
        - "ðŸ¤– Optimize this ticket"
        - "ðŸ‘¥ Auto-assign pending tasks"
        - "ðŸ“‘ Generate subtasks for this story"
        - "ðŸ“Š Report on sprint velocity"
        - "ðŸš€ Generate release notes"
      actions:
        - auto-fix-ticket-action
        - auto-assign-ticket-action
        - generate-subtasks-action
        - generate-release-notes-action
        - predict-sprint-slippage-action
        - list-incidents-action
  action:
    - key: generate-release-notes-action
      function: orchestrator-handler
      name: Generate Release Notes
      description: Summarizes merged PRs and issues for release notes
      actionType: create
      inputs:
        version:
          title: Version Name
          type: string
          required: true
    - key: predict-sprint-slippage-action
      function: orchestrator-handler
      name: Predict Sprint Slippage
      description: Analyzes velocity and remaining work to predict delays
      actionType: query
      inputs:
        sprintId:
          title: Sprint ID
          type: string
          required: false
    - key: auto-fix-ticket-action
      function: orchestrator-handler
      name: Improve Ticket Quality
      description: Rewrites ticket description with acceptance criteria and structure
      actionType: update
      inputs:
        issueKey:
          title: Issue Key
          type: string
          required: true
    - key: auto-assign-ticket-action
      function: orchestrator-handler
      name: Smart Auto-Assign
      description: Assigns ticket based on team workload and relevance
      actionType: update
      inputs:
        issueKey:
          title: Issue Key
          type: string
          required: true
    - key: generate-subtasks-action
      function: orchestrator-handler
      name: Generate Standard Subtasks
      description: Creates standard subtasks (Dev, Test, Docs) for an issue
      actionType: create
      inputs:
        issueKey:
          title: Issue Key
          type: string
          required: true
    - key: list-incidents-action
      function: list-inc-handler
      name: List Team Issues
      description: Retrieves active issues
      actionType: query
      inputs:
        projectKey:
          title: Project Key
          type: string
          required: false
  function:
    - key: resolver
      handler: index.handler
    - key: orchestrator-handler
      handler: index.handler
    - key: list-inc-handler
      handler: index.handler
resources:
  - key: main-resource
    path: static/dashboard/build
app:
  runtime:
    name: nodejs22.x
  id: ari:cloud:ecosystem::app/e4ec4fba-f5f1-4dab-880f-d2c3f2042552
permissions:
  scopes:
    - read:jira-work
    - write:jira-work
    - read:project:jira
    - read:jira-user
    - read:chat:rovo
    - read:component:compass
    - read:confluence-content.all
    - read:confluence-space.summary
    - write:confluence-content
    - write:page:confluence
    - storage:app
  external:
    fetch:
      backend:
        - 'https://api.bitbucket.org'
  content:
    styles:
      - unsafe-inline

providers:
  auth:
    - key: bitbucket-oauth-v2
      name: Bitbucket Cloud
      type: oauth2
      clientId: "nf5vc4yseA25tRmKpU" # Configured for Hackathon App
      remotes:
        - bitbucket-api
      bearerMethod: authorization-header
      scopes:
        - account
        - repository
      actions:
        authorization:
          remote: bitbucket-website
          path: /site/oauth2/authorize
        exchange:
          remote: bitbucket-website
          path: /site/oauth2/access_token
        retrieveProfile:
          remote: bitbucket-api
          path: /2.0/user
          resolvers:
            id: account_id
            displayName: display_name
            avatarUrl: links.avatar.href

remotes:
  - key: bitbucket-api
    baseUrl: https://api.bitbucket.org
  - key: bitbucket-website
    baseUrl: https://bitbucket.org
